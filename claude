#!/bin/bash
set -euo pipefail

CONTAINER_NAME="${1:-${CLAUDE_CONTAINER:-}}"

if [[ -z "$CONTAINER_NAME" ]]; then
  echo "Usage: $(basename "$0") <container-name>"
  exit 1
fi

exec incus exec "$CONTAINER_NAME" --user "$(id -u)" --group "$(id -g)" -- \
  bash -lc 'cd /workspace && claude'

